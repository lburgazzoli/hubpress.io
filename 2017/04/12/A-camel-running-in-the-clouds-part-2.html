<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>A camel running in the clouds (part 2)</title>

    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="320">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <meta name="description" content="">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="A camel running in the clouds (part 2)">
    <meta name="twitter:description" content="">

    <meta property="og:type" content="article">
    <meta property="og:title" content="A camel running in the clouds (part 2)">
    <meta property="og:description" content="">

    <!-- <meta name="twitter:site" content="">

<meta name="twitter:creator" content="">

<meta name="google-site-verification" content="">

<meta property="fb:admins" content="">
 -->

    <link href="/favicon.ico" rel="shortcut icon" type="image/x-icon">
    <link href="/apple-touch-icon-precomposed.png" rel="apple-touch-icon">

    <link href="//fonts.googleapis.com/" rel="dns-prefetch">
    <link href="//fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic|Open+Sans:700,400&subset=latin,latin-ext" rel="stylesheet">

    <link rel="stylesheet" href="//lburgazzoli.github.io/themes/ghostium/assets/css/main.min.css?v=1492017513482"/>
    <link rel="stylesheet" href="//lburgazzoli.github.io/themes/ghostium/assets/css/custom.css?v=1492017513482"/>
    <link rel="stylesheet" href="//lburgazzoli.github.io/themes/ghostium/assets/css/asciidoctor-foundation.css?v=1492017513482"/>




    <script type="text/javascript">
      var ga_ua = 'UA-XXXXX-X';
      
      var disqus_shortname = 'example';
      
      var enable_pjax = true;

      // Pace Options
      // ==============
      window.paceOptions = {
        catchupTime: 100,
        minTime: 100,
        elements: false,
        restartOnRequestAfter: 500,
        startOnPageLoad: false
      }

      // Ghostium Globals
      // ==============
      window.GHOSTIUM = {};
      GHOSTIUM.haveGA = typeof ga_ua !== 'undefined' && ga_ua !== 'UA-XXXXX-X';
      GHOSTIUM.haveDisqus = typeof disqus_shortname !== 'undefined' && disqus_shortname !== 'example';
      GHOSTIUM.enablePjax = typeof enable_pjax !== 'undefined' ? enable_pjax : true;
    </script>

    <script src="//lburgazzoli.github.io/themes/ghostium/assets/js/head-scripts.min.js?v=1492017513482"></script>

    <link rel="canonical" href="https://lburgazzoli.github.io/2017/04/12/A-camel-running-in-the-clouds-part-2.html" />
    <meta name="referrer" content="origin" />
    
    <meta property="og:site_name" content=".: lb :." />
    <meta property="og:type" content="article" />
    <meta property="og:title" content="A camel running in the clouds (part 2)" />
    <meta property="og:description" content="Meet Camel&amp;#8217;s ServiceCall EIP The ServiceCall EIP has been introduced in Camel 2.18.0 to allows calling remote services in a distributed systems looking up informaton about the service to consume from external systems such as Kubernetes, Consul, Etcd or DNS. The ServiceCall EIP has been enhanced" />
    <meta property="og:url" content="https://lburgazzoli.github.io/2017/04/12/A-camel-running-in-the-clouds-part-2.html" />
    <meta property="article:published_time" content="2017-04-12T00:00:00.000Z" />
    <meta property="article:tag" content="camel" />
    <meta property="article:tag" content="cloud" />
    <meta property="article:tag" content="microservices" />
    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="A camel running in the clouds (part 2)" />
    <meta name="twitter:description" content="Meet Camel&amp;#8217;s ServiceCall EIP The ServiceCall EIP has been introduced in Camel 2.18.0 to allows calling remote services in a distributed systems looking up informaton about the service to consume from external systems such as Kubernetes, Consul, Etcd or DNS. The ServiceCall EIP has been enhanced" />
    <meta name="twitter:url" content="https://lburgazzoli.github.io/2017/04/12/A-camel-running-in-the-clouds-part-2.html" />
    
    <script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "Article",
    "publisher": ".: lb :.",
    "author": {
        "@type": "Person",
        "name": "Luca Burgazzoli",
        "image": "https://avatars2.githubusercontent.com/u/1868933?v=3",
        "url": "https://lburgazzoli.github.io/author/lburgazzoli/",
        "sameAs": "http://lburgazzoli.github.io"
    },
    "headline": "A camel running in the clouds (part 2)",
    "url": "https://lburgazzoli.github.io/2017/04/12/A-camel-running-in-the-clouds-part-2.html",
    "datePublished": "2017-04-12T00:00:00.000Z",
    "keywords": "camel, cloud, microservices",
    "description": "Meet Camel&amp;#8217;s ServiceCall EIP The ServiceCall EIP has been introduced in Camel 2.18.0 to allows calling remote services in a distributed systems looking up informaton about the service to consume from external systems such as Kubernetes, Consul, Etcd or DNS. The ServiceCall EIP has been enhanced"
}
    </script>

    <meta name="generator" content="HubPress" />
    <link rel="alternate" type="application/rss+xml" title=".: lb :." href="https://lburgazzoli.github.io/rss/" />
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/styles/atom-one-dark.min.css">
  </head>
  <body class="post-template tag-camel tag-cloud tag-microservices">

    <button data-action="open-drawer" id="drawer-button" class="drawer-button"><i class="fa fa-bars"></i></button>
    <nav tabindex="-1" class="drawer">
      <div class="drawer-container">
        <!--.drawer-search(role="search")-->
        <ul role="navigation" class="drawer-list">
          
          <li class="drawer-list-item">
            <a href="https://lburgazzoli.github.io" data-pjax>
              <i class="fa fa-home"></i>Home
            </a>
          </li>
          <!-- <li class="drawer-list-item">
            <a href="https://lburgazzoli.github.io" title=".: lb :." data-pjax>
              <i class="fa fa-list-alt"></i>All posts
            </a>
          </li> -->
          <li class="drawer-list-item">
            <a href="https://lburgazzoli.github.io/rss/">
              <i class="fa fa-rss"></i>Subscribe to Feed
            </a>
          </li>
          <li class="drawer-list-divider"></li>
          <li class="drawer-list-item drawer-list-title">
            Follow me
          </li>
          
          
          <li class="drawer-list-item">
            <a href="lburgazzoli" title="Twitter" target="_blank">
              <i class="fa fa-twitter"></i>Twitter
            </a>
          </li>
          <li class="drawer-list-item">
            <a href="lburgazzoli" title="Github" target="_blank">
              <i class="fa fa-github"></i>Github
            </a>
          </li>
          <li class="drawer-list-item">
            <a href="https://www.linkedin.com/in/lucaburgazzoli" title="LinkedIn" target="_blank">
              <i class="fa fa-linkedin"></i>LinkedIn
            </a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="drawer-overlay"></div>
    <main id="container" role="main" class="container">
      <div class="surface">
        <div class="surface-container">
          <div data-pjax-container class="content">
            
<section class="wrapper wrapper-post">
  <div class="wrapper-container">
    <article itemscope itemtype="http://schema.org/BlogPosting" role="article" class="post post tag-camel tag-cloud tag-microservices">
        <section class="post-container">
          <header class="post-header">
            <ul class="post-meta-list">
              <li class="post-meta-item">
                <time datetime="2017-04-12" itemprop="datePublished">
                  19 hours ago
                </time>
              </li>
                <li class="post-meta-item">
                  <span class="tags"><i class="fa fa-tags"></i>
                      <span>
                      <a href="https://lburgazzoli.github.io/tag/camel/">camel</a>, <a href="https://lburgazzoli.github.io/tag/cloud/">cloud</a>, <a href="https://lburgazzoli.github.io/tag/microservices/">microservices</a></span>
                  </span>
                </li>
              <li class="post-meta-item">
                <a href="#disqus_thread" data-disqus-identifier="">Comments</a>
              </li>
            </ul>
            <h1 itemprop="name headline" class="post-title"><a href="/" itemprop="url" data-pjax title="A camel running in the clouds (part 2)">A camel running in the clouds (part 2)</a></h1>
            <!--h2 itemprop="about" class="post-subtitle"></h2-->
          </header>
          <aside class="post-side">
            <div class="post-author">
                <a href="http://lburgazzoli.github.io" class="post-author-avatar">
                  <img src="https://avatars2.githubusercontent.com/u/1868933?v&#x3D;3" alt="Luca Burgazzoli">
                </a>
              <div class="post-author-info">
                <a href="http://lburgazzoli.github.io" class="post-author-name">
                  Luca Burgazzoli
                </a>
                <p class="post-author-bio"></p>
              </div>
            </div>
          </aside>
          <div itemprop="articleBody" class="post-body">
            <div class="sect2">
<h3 id="_meet_camel_s_servicecall_eip">Meet Camel&#8217;s ServiceCall EIP</h3>
<div class="paragraph">
<p>The ServiceCall EIP has been introduced in Camel 2.18.0 to allows calling remote services in a distributed systems looking up informaton about the service to consume from external systems such as Kubernetes, Consul, Etcd or DNS. The ServiceCall EIP has been enhanced in Camel 2.19 to make it more extensible and easier to use.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
This post is based on Camel 2.19 which should be released shortly.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_servicecall_concepts">ServiceCall Concepts</h4>
<div class="paragraph">
<p>The ServiceCall is based on common cloud-concepts:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>service discovery</strong> to collect services definitions from external systems/registries.</p>
</li>
<li>
<p><strong>service filter</strong> to filter out services definitions.</p>
</li>
<li>
<p><strong>service chooser</strong> to choose the most appropriate service to call.</p>
</li>
<li>
<p><strong>load balancer</strong> glue for above concepts.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_servicecall_in_action">ServiceCall in Action</h4>
<div class="paragraph">
<p>The ServiceCall EIP has been implemented to require minimal configuration but let&#8217;s start with a verbose example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">public MyRouteBuilder extends RouteBuilder {
    @Override
    public void configure() throws Exception {
        from("timer:service-call?period=1s")
            .serviceCall()
                .name("myService") <i class="conum" data-value="1"></i><b>(1)</b>
                .staticServiceDiscovery() <i class="conum" data-value="2"></i><b>(2)</b>
                    .server("myService@host1.com:443")
                    .server("myService@host2.com:80")
                    .server("myService@host3.com:443")
                    .server("anotherService@host4.com:443")
                .end()
                .serviceFilter( <i class="conum" data-value="3"></i><b>(3)</b>
                    list -&gt; list.stream().filter(s -&gt; s.getPort() == 443).collect(Collectors.toList())
                ).serviceChooser( <i class="conum" data-value="4"></i><b>(4)</b>
                    list -&gt; list.get(0)
                )
            .end();
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Name the service you want to consume</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The service discovery</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The service filter</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The service chooser</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>When the timer fires, the load balancer created by the Service Call EIP leverages the provided service discovery implementation to query a thirth party system about the service named <code>myService</code> then it eventually filter out services not matching a given criteria through the provided service filter (in this case only services listening on port 443 are taken into account), then it chooses the service to use thanks to the given service chooser implementation and finally it invokes the service using the configured component (camel-http4 is the default).</p>
</div>
<div class="paragraph">
<p>With the example above, the final uri will be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>    http4:host1.com:443</code></pre>
</div>
</div>
<div class="paragraph">
<p>You often need to create a more complex camel uri and the Service Call EIP provides a number of options to achieve such goal:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <strong>service name</strong> supports a limited uri like syntax, here some examples</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>myService</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>http4://host:port</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>myService/path</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>http4://host:port/path</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>myService/path?foo=bar</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>http4://host:port/path?foo=bar</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">from("timer:service-call")
    .serviceCall()
        .name("myService/hello");</code></pre>
</div>
</div>
</li>
<li>
<p>If you wan to have more control over the uri construction, you can use the <strong>uri</strong> directive:</p>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 40%;">
<col style="width: 35%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">URI</th>
<th class="tableblock halign-left valign-top">Resolution</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>myService</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>undertow:http://myService/hellp</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>undertow:http://host:port/hello</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>myService</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>undertow:http://myService.host:myService.port/hello</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>undertow:http://host:port/hello</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">from("timer:service-call")
    .serviceCall()
        .name("myService")
        .uri("undertow:http://myService/hello");</code></pre>
</div>
</div>
</li>
<li>
<p>Advanced users can have full control over the uri construction through expressions:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">from("timer:service-call")
    .serviceCall()
        .name("myService")
        .expression()
            .simple("undertow:http://${header.CamelServiceCallServiceHost}:${header.CamelServiceCallServicePort}/hello");</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_servicecall_configuration">ServiceCall Configuration</h4>
<div class="paragraph">
<p>For simple services configuring a service call straight on the route is fine but if you need to leverage the ServiceCall on multiple routes you may want to have shared configurations.</p>
</div>
<div class="paragraph">
<p>This can be achieved adding one or more ServiceCallConfigurationDefinition to the camel context or registry:</p>
</div>
<div class="listingblock">
<div class="title">Example</div>
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">StaticServiceDiscovery discovery = new StaticServiceDiscovery();
discovery.addServer("myService@host1.com:443");
discovery.addServer("myService@host2.com:80");
discovery.addServer("myService@host3.com:443");
discovery.addServer("anotherService@host4.com:443");
discovery.addServer("anotherService@host5.com:8443");

ServiceCallConfigurationDefinition globalConf = new ServiceCallConfigurationDefinition();
globalConf.setServiceDiscovery(discovery);
globalConf.setServiceChooser(list -&gt; list.get(ThreadLocalRandom.current().nextInt(list.size())));

ServiceCallConfigurationDefinition httpsConf = new ServiceCallConfigurationDefinition();
httpsConf.setServiceFilter(list -&gt; list.stream().filter(s -&gt; s.getPort() == 443).collect(toList()))

getContext().setServiceCallConfiguration(globalConf); <i class="conum" data-value="1"></i><b>(1)</b>
getContext().addServiceCallConfiguration("https", httpsConf); <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set the default ServiceCall configuration</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Add a specific configuration named "https"</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>From now on, the globla configuration is used to provide the defaults for all the service call definitions and additional named configuration, let&#8217;s see how this impacts our routes definition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">from("timer:service-call-1")
    .serviceCall()
        .name("myService")
        .serviceCallConfiguration("https") <i class="conum" data-value="1"></i><b>(1)</b>
        .serviceChooser(list -&gt; list.get(0)); <i class="conum" data-value="2"></i><b>(2)</b>

from("timer:service-call-2")
    .serviceCall()
        .name("anotherService");</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Set the service call configuration used as template</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Override the service chooser provided by the template</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>What&#8217;s happen unde the hoods is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Both the service call have access to the same service list thanks to the globa configuration</p>
</li>
<li>
<p>The first service call will be able to consume only services on port 443 as it hinerits from the configuration named <code>https</code></p>
</li>
<li>
<p>The first service call will always use the first server retrieved by the service discovery (yes, in this dummy example it will always be the same)</p>
</li>
<li>
<p>The second service call inherits its whole configuration from the default one</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_spring_boot_support">Spring Boot support</h4>
<div class="paragraph">
<p>The Service Call EIP plays very well with Spring Boot and you can configure most of the options from the <code>application.properties</code> so let&#8217;s write an example of a micro service that should get the list of available services from a <code>consul</code> registry and using a <code>ribbon</code> load balancer:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Dependencies:</strong></p>
<div class="ulist">
<ul>
<li>
<p>camel-spring-boot-starter</p>
</li>
<li>
<p>camel-consul-starter</p>
</li>
<li>
<p>camel-ribbon-starter</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Application configuration:</strong></p>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties"># this can be configured stright tot he route and it has been included to show
# property placeholders support
service.name = myService

# this property is not mandatory and it has been included to show how to configure
# the service discovery implementation provided by camel-consul
camel.cloud.consul.service-discovery.url = http://localhost:8500</code></pre>
</div>
</div>
</li>
<li>
<p><strong>Routes:</strong></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">@Component
public class MyRouteBuilder implements RouteBuilder {
    @Override
    public void configure() throws Exception {
        from("direct:service-call")
            .serviceCall("{{service.name}}");
    }
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>That&#8217;s all!</p>
</div>
<div class="paragraph">
<p>Under the hood the camel starter perform auto configuration of the underlying services such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A LoadBalancer based on NetflixOSS Ribbon</p>
</li>
<li>
<p>A ServiceDiscovery based on HashiCorp Consul</p>
</li>
<li>
<p>A ServiceFilter based on Consul&#8217;s service health</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If needed you can add additional Service Discovery to the mix and under the hood camel will bridge them i.e. you can add a static list of services to the mix with a simple configuration like:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlight"><code class="language-properties" data-lang="properties">camel.cloud.service-discovery.services[myService] = host1:8080,host2:8080,host3:8080</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
You can use Spring Cloud and Spring Cloud Netflix instead of Camel&#8217;s own consul/ribbon implementation by using camel-spring-cloud-starter and camel-spring-cloud-netflix-starter.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_ready_to_use_implementations">Ready to use Implementations</h4>
<div class="paragraph">
<p>Camel provides some implementations of the conceept we have introduced sat the biginning of the post out of the box:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 30%;">
<col style="width: 50%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Artifact</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="6"><div><div class="paragraph">
<p><strong>Service Discovery</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Static service discovery</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Chained service discovery</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Consul based service discovery</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-consul</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>DNS SRV based service discovery</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-dns</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Etcd based service discovery</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-etcd</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Kubernetes based service discovery</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-kubernetes</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="4"><div><div class="paragraph">
<p><strong>Service Filter</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Healty filter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Pass through filter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-root</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Blacklist service filter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Chained service filter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="2"><div><div class="paragraph">
<p><strong>Service Chooser</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Round robin chooser</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Random chooser</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-middle" rowspan="2"><div><div class="paragraph">
<p><strong>Load Balancer</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>Default load balancer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-core</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>SpringCloud load-balancer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>camel-spring-cloud</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
</div>
          </div>
          <footer class="post-footer">
            <div itemprop="author" itemscope itemtype="http://schema.org/Person" class="post-author">
                <a href="http://lburgazzoli.github.io" class="post-author-avatar">
                  <img itemprop="image" src="https://avatars2.githubusercontent.com/u/1868933?v&#x3D;3" alt="Luca Burgazzoli">
                </a>
              <div class="post-author-info">
                <h4 class="post-footer-heading">Written By</h4>
                <a href="http://lburgazzoli.github.io" itemprop="url" class="post-author-name">
                  <span itemprop="name">Luca Burgazzoli</span>
                </a>
                <p itemprop="description" class="post-author-bio"></p>
                  <p class="post-author-location">Piacenza, Italy</p>
                  <p class="post-author-website">
                    <a href="http://lburgazzoli.github.io" rel="nofollow">http://lburgazzoli.github.io</a>
                  </p>
                <p class="post-info">
                  <b class="post-info-title">Published on</b>
                  <time class="post-date">April 12, 2017</time>
                </p>
              </div>
            </div>
            <div class="post-social">
              <h4 class="post-footer-heading">Spread the word</h4>
              <a href="#" data-action="share-twitter"><i class="fa fa-fw fa-lg fa-twitter"></i></a>
              <a href="#" data-action="share-facebook"><i class="fa fa-fw fa-lg fa-facebook"></i></a>
              <a href="#" data-action="share-gplus"><i class="fa fa-fw fa-lg fa-google-plus"></i></a>
            </div>
          </footer>
        </section>
      <section itemprop="comment" class="post-comments">
        <div id="disqus_thread"></div>
      </section>
    </article>

    <footer role="contentinfo" class="footer">
      <p><small>Copyright &copy; <span itemprop="copyrightHolder">.: lb :.</span>. 2017. All Rights Reserved.</small></p>
      <p><small><a href="http://ghostium.oswaldoacauan.com/" target="_blank">Ghostium Theme</a> by <a href="http://twitter.com/oswaldoacauan" target="_blank">@oswaldoacauan</a></small></p>
      <p><small>Adapted by <a href="https://twitter.com/mgreau">Maxime Gréau</a></small></p>
      <p><small>Published with <a href="http://hubpress.io">HubPress</a></small></p>
    </footer>
  </div>
</section>


<section class="post-comments">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
  var disqus_shortname = 'lburgazzoli-github-io'; // required: replace example with your forum shortname
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>


          </div>
        </div>
      </div>
    </main>

    <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/moment.js/2.9.0/moment-with-locales.min.js?v="></script> <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.10.0/highlight.min.js?v="></script> 
      <script type="text/javascript">
        jQuery( document ).ready(function() {
          // change date with ago
          jQuery('ago.ago').each(function(){
            var element = jQuery(this).parent();
            element.html( moment(element.text()).fromNow());
          });
        });

        hljs.initHighlightingOnLoad();
      </script>
       
    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

    <script src="//lburgazzoli.github.io/themes/ghostium/assets/js/foot-scripts.min.js?v=1492017513482"></script>


  </body>
</html>
